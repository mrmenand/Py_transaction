# Design Patterns  

## Acknowledge 
- 《人人都懂设计模式：从生活中领悟设计模式：Python实现》 

## Preliminary 

### 设计原则 

#### SOLID原则 
SOLID是面向对象设计（OOD）的五大基本原则的首字母缩写组合。
这
五大原则分别是：S—单一职责原则，O—开放封闭原则，L—里氏替换原则，I—接口隔离原则，D—依赖倒置原则  

| 原则 | 核心思想 |实例| 优点 | 缺点 | 
|:-:|:-:|:-:|:-:|:-:|
| 单一职责原则（Single Responsibility Principle，SRP）  | 一个类应该有且仅有一个原因引起它的变更|人吃饭，狗恰狗粮 |1.功能单一,职责清晰<br>2.增强可读性，方便维护 | 1.拆分得太详细,类的数量会急剧增加<br>2.职责的度量没有统一的标准，需要根据项目实现情况而定。| 
|开放封闭原(Open Close Principle,OCP) |软件实体（如类、模块、函数等应该对拓展开放，对修改封闭 |动物元类，继承的子类有不同的方法实现，天上飞、地上跑和海里游|   
|里氏替换原则（LiskovSubstitution Principle，LSP| 所有能引用基类的地方必须能透明地使用其子类的对象（父类出现的地方可以用子类来替换它，反之子类能出现的地方，父类不一定能出现）| 程序猿类继承陆地动物的方法，新增方法了攒天猴方法 | 
| 接口隔离原则（Interface Segregation Principle，ISP| 客户端不应该依赖它不需要的接口。（建立单一接口，不要建立庞大臃肿的接口，尽量细化接口，接口中的方法尽量少） 
|依赖倒置原则（Dependence Inversion Principle，DIP） |高层模块不应该依赖低层模块，二者都该依赖其抽象。抽象不应该依赖细节，细节应该依赖抽象 | 动物元类抽象不依赖于细节（具体的食物类），具体的动物类（Dog）也不依赖于细节，只依赖抽象编程| 


### UML 
UML（Unified Modeling Language）统一建模语
言，一种由一整套图组成的标准化建模语言，用于帮助系统开发人员阐明、设计和构建软件系统。 

**类图**表示不同实体，以及彼此的关系。
该图描述了系统中对象的类型以及它们之间存在的各种静态关系，是一切面向对象方法的核心建模工具。 

类图常见的几种关系：
- 泛化（Generalization）：是一种继承关系，表示一般与特殊的关系，，它指定了子类如何特化父类的所有特征和行为。 
- 实现（Realization）：是一种类与接口的关系，表示类是接口所有特征和行为的实现。 
- 组合（Composition）：也表示整体与部分的关系，但部分离开整体后无法单独存在。因此，组合与聚合相比是一种更强的关系。 
- 聚合（Aggregation）：是整体与部分的关系，部分可以离开整体而单独存在。  
- 关联（Association）：是一种拥有关系，它使一个类知道另一个类的属性和方法。 
- 依赖（Dependency）：是一种使用的关系，即一个类的实现需要另一个类的协助，所以尽量不要使用双向的互相依赖。  

![uml_cls](./others/uml_cls.png)

## 观察者模式（Observer） 
在**对象**间(主题Subject)定义一种一对多的**依赖**关系（观察者列表Observer）,被观察者对象在状态或内容（数据）发生变化时，所有依赖它的对象都会被通知并自动更新。 

观察者模式是对象的行为模式，又叫发布/订阅（Publish/Subscribe）模式、模型/视图（Model/View）模式、源/监听器（Source/Listener）模式或从属者（Dependents）模式。  

**观察者模式的核心思想就是在被观察者与观察者之间建立一种自动触发的关系。**  

应用场景：
- 对一个对象状态或数据的更新需要其他对象同步更新，或者一个对象的更
新需要依赖另一个对象的更新。
- 对象仅需要将自己的更新通知给其他对象而不需要知道其他对象的细节，
    - 分布式系统中实现事件服务
    - 用作新闻机构的架构
    - 股票市场也是观察者模式的一个大型场景 

[相关代码实现:热水器以及异常登陆机制](./pattern/observer.py)  

`
## 状态模式（State）
- 决定状态变化的因素也非常多，我们可以把决定状态变化的属性单独抽象成一个类StateInfo，这样判断状态属性是否符合当前的状态isMatch时就可以传入更多的信息.  
- 每一种状态应当只有唯一的实例. 

应用场景:
（1）一个对象的行为取决于它的状态，并且它在运行时可能经常改变它的状态，从而改变它的行为。
（2）一个操作中含有庞大的多分支的条件语句，这些分支依赖于该对象的状态，且每一个分支的业务逻辑都非常复杂时，我们可以使用状态模式来拆分不同的分支逻辑，使程序有更好的可读性和可维护性。


[相关代码实现:水的三种形态](./pattern/state.py) 